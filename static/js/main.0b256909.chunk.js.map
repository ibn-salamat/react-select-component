{"version":3,"sources":["select/assets/dropdown_arrow.png","select/index.js","App.js","index.js"],"names":["module","exports","Select","options","optionProp","handleSelectChange","useState","selectedOptions","setSelectedOptions","searchValue","setSearchValue","listVisibility","setListVisibility","selectedOptionsRef","useRef","inputRef","useEffect","showList","state","current","filter","el","forEach","classList","remove","focus","filteredOptions","map","lang","country","id","isSearchValueEmpty","trim","toLowerCase","langMatchIndex","indexOf","countryMatchIndex","find","item","key","onClick","option","selectOption","highlight","Wrap","GlobalStyles","List","length","InputWrap","i","SelectedOption","ref","e","target","add","focusSelectedOption","placeholder","value","onChange","onKeyDown","keyCode","contains","copy","pop","blur","TogglerSelect","word","index","substring","createGlobalStyle","styled","div","button","DropdownArrow","initial_languages","App","useReducer","prevState","newState","select1","select2","select3","setState","style","display","flexDirection","alignItems","JSON","stringify","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0b256909.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAHCAYAAADebrddAAAAZUlEQVQY02P4//8/IwMRAKxu49YdNzZu2TkNlyaQ+IatO2cA1V0FKt5Zv2HLjv9ADbPQNYD4QPG5IPkNW3ZWgwWBGprRNSArBMo3oFiHpoEZp0IsGm7hVYikoQGIv2zctqsWXQ4AGPZvtpjg4t8AAAAASUVORK5CYII=\"","import React, { useState, useRef, useEffect } from \"react\";\nimport styled, { createGlobalStyle } from \"styled-components\";\n\nimport DropdownArrow from \"./assets/dropdown_arrow.png\";\n\nexport function Select({ options: optionProp = [], handleSelectChange }) {\n  const [options] = useState(optionProp); // maybe we need to change it\n  const [selectedOptions, setSelectedOptions] = useState([]);\n  const [searchValue, setSearchValue] = useState(\"\");\n\n  const [listVisibility, setListVisibility] = useState(false);\n\n  const selectedOptionsRef = useRef([]);\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    if (handleSelectChange) {\n      handleSelectChange(selectedOptions);\n    }\n  }, [selectedOptions]);\n\n  const selectOption = (id) => {\n    setSelectedOptions([...selectedOptions, options.find((option) => option.id === id)]);\n    setListVisibility(false);\n    inputRef.current.focus();\n    selectedOptionsRef.current = selectedOptionsRef.current.filter((el) => el); // filter null\n    selectedOptionsRef.current.forEach((el) => el.classList.remove(\"active\"));\n  };\n\n  const handleKeyDown = (e) => {\n    const { target, keyCode } = e;\n    switch (keyCode) {\n      // backspace\n      case 8:\n        const isEmpty = target.value.trim().length === 0;\n        if (!isEmpty) return;\n        selectedOptionsRef.current = selectedOptionsRef.current.filter((el) => el); // filter null\n        if (!selectedOptionsRef.current.length) return;\n\n        const isActiveOption = selectedOptionsRef.current.find((el) =>\n          el.classList.contains(\"active\")\n        );\n\n        if (!isActiveOption) {\n          selectedOptionsRef.current.forEach((el) => el.classList.remove(\"active\"));\n          selectedOptionsRef.current[selectedOptionsRef.current.length - 1].classList.add(\n            \"active\"\n          );\n        } else {\n          const copy = [...selectedOptions];\n          copy.pop();\n          setSelectedOptions(copy);\n        }\n        break;\n      case 40:\n        break;\n      case 27:\n        setListVisibility(false);\n        inputRef.current.blur();\n        break;\n      default:\n        break;\n    }\n  };\n\n  const handleChange = (e) => {\n    setSearchValue(e.target.value);\n    setListVisibility(true);\n  };\n\n  const focusSelectedOption = ({ target }) => {\n    selectedOptionsRef.current = selectedOptionsRef.current.filter((el) => el); // filter null\n    selectedOptionsRef.current.forEach((el) => el.classList.remove(\"active\"));\n    target.classList.add(\"active\");\n  };\n\n  const showList = (state) => {\n    selectedOptionsRef.current = selectedOptionsRef.current.filter((el) => el); // filter null\n    selectedOptionsRef.current.forEach((el) => el.classList.remove(\"active\"));\n    inputRef.current.focus();\n    setListVisibility(state);\n  };\n\n  const filteredOptions = options\n    .map(({ lang, country, id }) => {\n      const searchValueTrimmed = searchValue.trim().toLowerCase();\n\n      const isSearchValueEmpty = !searchValueTrimmed;\n      const langMatchIndex = lang.toLowerCase().indexOf(searchValue);\n      const countryMatchIndex = country.toLowerCase().indexOf(searchValue);\n\n      const isMatch =\n        isSearchValueEmpty || langMatchIndex !== -1 || countryMatchIndex !== -1;\n      if (!isMatch) return;\n\n      const isInclude = selectedOptions.find((item) => item.id === id);\n      if (isInclude) return;\n\n      return (\n        <div key={id} onClick={() => selectOption(id)}>\n          <p>{highlight(lang, langMatchIndex, searchValue)}</p>\n          <p>{highlight(country, countryMatchIndex, searchValue)}</p>\n        </div>\n      );\n    })\n    .filter((el) => el); // to delete undefined items\n\n  return (\n    <Wrap>\n      <GlobalStyles />\n      {listVisibility && (\n        <List>{filteredOptions.length ? filteredOptions : <p>No result</p>}</List>\n      )}\n\n      <InputWrap>\n        {selectedOptions.map(({ id, lang }, i) => {\n          return (\n            <SelectedOption\n              ref={(el) => (selectedOptionsRef.current[i] = el)}\n              onClick={(e) => focusSelectedOption(e)}\n              key={id}\n            >\n              {lang}\n              <button\n                onClick={() =>\n                  setSelectedOptions(selectedOptions.filter((item) => item.id !== id))\n                }\n              >\n                &times;\n              </button>\n            </SelectedOption>\n          );\n        })}\n\n        <input\n          ref={inputRef}\n          placeholder=\"Select languages\"\n          value={searchValue}\n          onChange={handleChange}\n          onKeyDown={handleKeyDown}\n          onClick={() => showList(true)}\n        />\n      </InputWrap>\n      <TogglerSelect onClick={() => showList(!listVisibility)} />\n    </Wrap>\n  );\n}\n\nconst highlight = (word, index, value) => {\n  return (\n    <>\n      {word.substring(0, index)}\n      {index > -1 ? (\n        <b>{word.substring(index, index + value.length)}</b>\n      ) : (\n        word.substring(index, index + value.length)\n      )}\n      {word.substring(index + value.length)}\n    </>\n  );\n};\n\nconst GlobalStyles = createGlobalStyle`\n  body{\n    font-family: Verdana;\n  }\n  input, button{\n    border: none;\n    outline: none;\n  }\n\n`;\n\nconst Wrap = styled.div`\n  display: flex;\n  justify-content: space-between;\n  width: 300px;\n  padding: 10px;\n  border: 1px solid #d3d9de;\n  border-radius: 3px;\n  position: relative;\n  margin: 5px;\n`;\n\nconst InputWrap = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst List = styled.div`\n  border: 1px solid #c5c8cb;\n  max-height: 200px;\n  width: 100%;\n  left: 0;\n  position: absolute;\n  z-index: 10;\n  background: white;\n  top: calc(100% + 5px);\n  overflow-y: scroll;\n\n  > div {\n    margin: 0;\n    border-bottom: 1px solid #c5c8cb;\n    padding: 10px 5px;\n\n    &:hover {\n      background: #dae2ea;\n    }\n\n    p {\n      margin: 5px 0;\n    }\n  }\n`;\n\nconst SelectedOption = styled.div`\n  display: flex;\n  align-items: center;\n  background: #dae2ea;\n  margin: 5px 2px;\n  padding: 3px 4px;\n  color: #55677d;\n\n  &.active {\n    background: #577ca1;\n    color: white;\n  }\n\n  &.active button {\n    color: white;\n  }\n\n  button {\n    margin: 0;\n    width: 20px;\n    background: none;\n    font-size: 24px;\n    line-height: 0;\n    color: #55677d;\n  }\n`;\n\nconst TogglerSelect = styled.button`\n  height: 30px;\n  width: 30px;\n  background: url(${DropdownArrow}) no-repeat center;\n  background-size: 15px;\n  border: none;\n  outline: none;\n  cursor: pointer;\n`;\n","import React, { useReducer } from \"react\";\nimport { Select } from \"./select\";\n\nconst initial_languages = [\n  {\n    lang: \"Қазақша\",\n    country: \"Kazakhstan\",\n    id: 0,\n  },\n  {\n    lang: \"Русский\",\n    country: \"Россия\",\n    id: 1,\n  },\n  {\n    lang: \"English\",\n    country: \"USA\",\n    id: 2,\n  },\n  {\n    lang: \"English\",\n    country: \"UK\",\n    id: 3,\n  },\n  {\n    lang: \"Arabic\",\n    country: \"Saudia\",\n    id: 4,\n  },\n  {\n    lang: \"Italian\",\n    country: \"Italy\",\n    id: 5,\n  },\n  {\n    lang: \"Spanish\",\n    country: \"Spain\",\n    id: 6,\n  },\n];\n\nfunction App() {\n  const [state, setState] = useReducer((prevState, newState) => {\n    return {\n      ...prevState, ...newState\n    }\n  }, {\n    select1: null,\n    select2: null,\n    select3: null\n  })\n  return (\n    <div style={{display: 'flex', flexDirection: \"column\", alignItems: 'center'}}>\n      <br />\n      <br />\n\n      Select1: \n      <br />\n      <br />\n\n      <code>{JSON.stringify(state.select1)}</code>\n\n      <br />\n\n      Select2: \n      <br />\n      <br />\n\n      <code>{JSON.stringify(state.select2)}</code>\n\n      <br />\n\n      Select3: \n      <br />\n      <br />\n\n      <code>{JSON.stringify(state.select3)}</code>\n      <br />\n      <Select\n        options={initial_languages}\n        handleSelectChange={(value) => \n          setState({select1: value})\n        }\n      />\n\n      <Select\n        options={initial_languages}\n        handleSelectChange={(value) => {\n          setState({select2: value})\n        }}\n      />\n\n      <Select\n        options={initial_languages}\n        handleSelectChange={(value) => {\n          setState({select3: value})\n\n        }}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}